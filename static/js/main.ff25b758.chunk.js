(this["webpackJsonpstar-wars-db"]=this["webpackJsonpstar-wars-db"]||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/loading-icon.f4404720.gif"},30:function(e,t){e.exports="data:image/png;base64,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"},32:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),l=n(4),i=n(3),s=n(5),u=n(6),p=n(11),m=n(10),E=function(e){return r.a.createElement("div",{className:"text-center my-4 w-100"},"\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.error))},d=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(u.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement(E,{error:this.state.hasError}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:e}}}]),n}(r.a.Component),h=n(21),g=n(13);function f(e,t){var n=e.randomPlanetState;switch(t.type){case"FETCH_RANDOM_PLANET_REQUEST":return{planet:{},loading:!0,error:null};case"FETCH_RANDOM_PLANET_SUCCESS":return{planet:t.payload,loading:!1,error:null};case"FETCH_RANDOM_PLANET_FAILURE":return{planet:{},loading:!1,error:t.payload};default:return n}}function A(e,t){var n=e.personMiniListState;switch(t.type){case"FETCH_PERSON_MINI_LIST_REQUEST":return{person:null,list:[],loading:!0,error:null};case"FETCH_PERSON_MINI_LIST_SUCCESS":return{person:null,list:t.payload,loading:!1,error:null};case"FETCH_PERSON_MINI_LIST_FAILURE":return{person:null,list:[],loading:!1,error:t.payload};case"SELECT_PERSON_FROM_MINI_LIST":return{person:t.payload,list:n.list,loading:!1,error:null};default:return n}}function O(e,t){var n=e.personListState;switch(t.type){case"FETCH_PERSON_LIST_REQUEST":return{pages:{},list:[],loading:!0,error:null};case"FETCH_PERSON_LIST_SUCCESS":return{pages:t.payload.pages,list:t.payload.results,loading:!1,error:null};case"FETCH_PERSON_LIST_FAILURE":return{pages:{},list:{},loading:!1,error:t.payload};default:return n}}function S(e,t){var n=e.personState;switch(t.type){case"FETCH_PERSON_REQUEST":return{item:{},loading:!0,error:null};case"FETCH_PERSON_SUCCESS":return{item:t.payload,loading:!1,error:null};case"FETCH_PERSON_FAILURE":return{item:{},loading:!1,error:t.payload};default:return n}}function H(e,t){var n=e.planetListState;switch(t.type){case"FETCH_PLANET_LIST_REQUEST":return{pages:{},list:[],loading:!0,error:null};case"FETCH_PLANET_LIST_SUCCESS":return{pages:t.payload.pages,list:t.payload.results,loading:!1,error:null};case"FETCH_PLANET_LIST_FAILURE":return{pages:{},list:{},loading:!1,error:t.payload};default:return n}}function j(e,t){var n=e.planetState;switch(t.type){case"FETCH_PLANET_REQUEST":return{item:{},loading:!0,error:null};case"FETCH_PLANET_SUCCESS":return{item:t.payload,loading:!1,error:null};case"FETCH_PLANET_FAILURE":return{item:{},loading:!1,error:t.payload};default:return n}}function I(e,t){var n=e.starshipListState;switch(t.type){case"FETCH_STARSHIP_LIST_REQUEST":return{pages:{},list:[],loading:!0,error:null};case"FETCH_STARSHIP_LIST_SUCCESS":return{pages:t.payload.pages,list:t.payload.results,loading:!1,error:null};case"FETCH_STARSHIP_LIST_FAILURE":return{pages:{},list:{},loading:!1,error:t.payload};default:return n}}function y(e,t){var n=e.starshipState;switch(t.type){case"FETCH_STARSHIP_REQUEST":return{item:{},loading:!0,error:null};case"FETCH_STARSHIP_SUCCESS":return{item:t.payload,loading:!1,error:null};case"FETCH_STARSHIP_FAILURE":return{item:{},loading:!1,error:t.payload};default:return n}}var v={randomPlanetState:{planet:{},loading:!0,error:null},personMiniListState:{person:null,list:[],loading:!0,error:null},personState:{item:{},loading:!0,error:null},personListState:{pages:{},list:[],loading:!0,error:null},planetState:{item:{},loading:!0,error:null},planetListState:{pages:{},list:[],loading:!0,error:null},starshipState:{item:{},loading:!0,error:null},starshipListState:{pages:{},list:[],loading:!0,error:null}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return console.log(t.type),Object(g.a)(Object(g.a)({},e),{},{randomPlanetState:f(e,t),personMiniListState:A(e,t),personState:S(e,t),personListState:O(e,t),planetState:j(e,t),planetListState:H(e,t),starshipListState:I(e,t),starshipState:y(e,t)})},b=Object(h.b)(_),T=n(2),w=n(14),P=n.n(w),N={person:"person",planet:"planet",starship:"starship"},R=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).currentMenuIndex=0,a.menuItems=[{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",link:"/",type:"main"},{name:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0438",link:"/".concat(N.person,"/all"),type:N.person},{name:"\u041f\u043b\u0430\u043d\u0435\u0442\u044b",link:"/".concat(N.planet,"/all"),type:N.planet},{name:"\u041a\u043e\u0440\u0430\u0431\u043b\u0438",link:"/starship/all",type:N.starship}],a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.location.pathname,n=null;return this.menuItems.forEach((function(e,a){new RegExp("^/".concat(e.type)).test(t)&&(n=a)})),this.currentMenuIndex=n||0,r.a.createElement("header",null,r.a.createElement("h1",null,"StarDB"),r.a.createElement("p",null,"\u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u0417\u0432\u0451\u0437\u0434\u043d\u044b\u0439 \u0412\u043e\u0439\u043d"),r.a.createElement("ul",{className:"nav nav-tabs mb-3"},this.menuItems.map((function(t,n){var a=P()({"nav-link":!0,active:e.currentMenuIndex===n});return r.a.createElement("li",{key:"menuItem".concat(n),className:"nav-item"},r.a.createElement(i.b,{to:t.link,className:a},t.name))}))))}}]),n}(r.a.Component),C=Object(T.f)(R),L=r.a.createContext(),D=L.Provider,F=L.Consumer;function M(e){return function(t){return r.a.createElement(F,null,(function(n){return r.a.createElement(e,Object.assign({},t,{swapiService:n}))}))}}var x=n(16),U=n.n(x),k=function(){return r.a.createElement("div",{className:"text-center my-4 w-100"},r.a.createElement("img",{src:U.a,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}))},Q=n(30),Y=n.n(Q),B=function(e,t,n,a){var r;return r=n?function(e){return n(a(e)),e}:function(e){return e},t(e.id).then((function(t){var n=URL.createObjectURL(t),a=Object(g.a)(Object(g.a)({},e),{},{img:n});return r(a)})).catch((function(t){console.log(t);var n=Object(g.a)(Object(g.a)({},e),{},{img:Y.a});return r(n)}))},z=function(e,t,n,a){return function(r,c){return function(o){var l=c.swapiService[a],i=l.getItemMethod,s=l.getImageMethod;r(e()),i(o).then((function(e){return r(t(e)),B(e,s,r,t)})).then((function(e){e.relations&&K(e,c.swapiService,r,t)})).catch((function(e){return r(n(e))}))}}},G=function(e,t,n,a){return function(r,c){return function(o){var l=c.swapiService[a],i=l.getImageMethod,s=l.getListMethod;r(e()),s(o).then((function(e){r(t(e));var n=e.results.map((function(e){return B(e,i)}));Promise.all(n).then((function(n){e.results=n,r(t(e))}))})).catch((function(e){return r(n(e))}))}}},K=function(e,t,n,a){var r=e.relations.map((function(e){return function(e,t){var n=t[e.type],a=n.getItemMethod,r=n.getImageMethod,c=e.data.map((function(e){return a(e,!0)}));return Promise.all(c).then((function(e){return e.map((function(e){return B(e,r)}))})).then((function(e){return Promise.all(e)})).then((function(t){return Object(g.a)(Object(g.a)({},e),{},{loading:!1,data:t})})).catch((function(e){console.log(e)}))}(e,t)}));Promise.all(r).then((function(t){var r=Object(g.a)(Object(g.a)({},e),{},{relations:t});n(a(r))}))},X=z((function(){return{type:"FETCH_RANDOM_PLANET_REQUEST"}}),(function(e){return{type:"FETCH_RANDOM_PLANET_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_RANDOM_PLANET_FAILURE",payload:e}}),N.planet),W=function(e){return{type:"SELECT_PERSON_FROM_MINI_LIST",payload:e}},V=function(e,t){return function(){var n=t.swapiService;e({type:"FETCH_PERSON_MINI_LIST_REQUEST"}),n.getAllPersonsMini().then((function(n){e({type:"FETCH_PERSON_MINI_LIST_SUCCESS",payload:n});var a=n[Math.floor(10*Math.random())];q(e,t)(a)()})).catch((function(t){return e({type:"FETCH_PERSON_MINI_LIST_FAILURE",payload:t})}))}},q=function(e,t){return function(n){return function(){var a=t.swapiService;e(W(n)),B(n,a.getPersonPhoto,e,W)}}},Z=G((function(){return{type:"FETCH_PERSON_LIST_REQUEST"}}),(function(e){return{type:"FETCH_PERSON_LIST_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_PERSON_LIST_FAILURE",payload:e}}),N.person),J=z((function(){return{type:"FETCH_PERSON_REQUEST"}}),(function(e){return{type:"FETCH_PERSON_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_PERSON_FAILURE",payload:e}}),N.person),$=G((function(){return{type:"FETCH_PLANET_LIST_REQUEST"}}),(function(e){return{type:"FETCH_PLANET_LIST_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_PLANET_LIST_FAILURE",payload:e}}),N.planet),ee=z((function(){return{type:"FETCH_PLANET_REQUEST"}}),(function(e){return{type:"FETCH_PLANET_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_PLANET_FAILURE",payload:e}}),N.planet),te=G((function(){return{type:"FETCH_STARSHIP_LIST_REQUEST"}}),(function(e){return{type:"FETCH_STARSHIP_LIST_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_STARSHIP_LIST_FAILURE",payload:e}}),N.starship),ne=z((function(){return{type:"FETCH_STARSHIP_REQUEST"}}),(function(e){return{type:"FETCH_STARSHIP_SUCCESS",payload:e}}),(function(e){return{type:"FETCH_STARSHIP_FAILURE",payload:e}}),N.starship);function ae(e){return"".concat(e[0],": ").concat(e[1]," ").concat(e[2]?"("+e[2]+")":"")}var re=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Math.floor(25*Math.random()+2);this.props.fetchRandomPlanet(e)}},{key:"render",value:function(){var e,t=this.props.randomPlanetState,n=t.planet,a=t.error,c=t.loading;return e=a?function(){return r.a.createElement(E,{error:a})}:c?function(){return r.a.createElement(k,null)}:function(){return r.a.createElement(ce,{planet:n})},r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u0430\u044f \u043f\u043b\u0430\u043d\u0435\u0442\u0430"),r.a.createElement("div",{className:"card mb-3"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(e,null))))}}]),n}(r.a.Component),ce=function(e){var t=e.planet,n=t.id,a=t.name,c=t.img,o=t.data,l=Object.keys(o);return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{src:c,className:"card-img mx-1 my-1",alt:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u0430\u044f \u043f\u043b\u0430\u043d\u0435\u0442\u0430"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a),l.map((function(e,t){return r.a.createElement("p",{key:"item".concat(n,"Data").concat(t),className:"card-text"},ae(o[e]))})),r.a.createElement(i.b,{to:"/planet/".concat(n),className:"mt-3 btn btn-light"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"))))},oe=M(Object(l.b)((function(e){return{randomPlanetState:e.randomPlanetState}}),(function(e,t){return{fetchRandomPlanet:X(e,t)}}))(re)),le=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchPersonMiniList()}},{key:"render",value:function(){var e,t,n=this,a=this.props.personMiniListState,c=a.person,o=a.list,l=a.error,i=a.loading,s=c?c.id:null;return e=l?function(){return r.a.createElement(E,{error:l})}:i?function(){return r.a.createElement(k,null)}:function(){return r.a.createElement(ie,{list:o,selectPerson:n.props.selectPerson,selectedId:s})},t=c?function(){return r.a.createElement(se,{person:c})}:function(){return r.a.createElement(k,null)},r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435\u0439"),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},r.a.createElement(e,null)),r.a.createElement("div",{className:"col"},r.a.createElement(t,null))))}}]),n}(r.a.Component),ie=function(e){return e.list.map((function(t){var n=P()({"list-group-item":!0,"list-group-item-action":!0,active:t.id===e.selectedId});return r.a.createElement("button",{key:t.name,type:"button",className:n,onClick:e.selectPerson(t)},t.name)}))},se=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.person.img,className:"card-img-top",alt:e.person.name}),r.a.createElement(i.b,{to:"/person/".concat(e.person.id),className:"mt-3 btn btn-light"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430"))},ue=M(Object(l.b)((function(e){return{personMiniListState:e.personMiniListState}}),(function(e,t){return{fetchPersonMiniList:V(e,t),selectPerson:q(e,t)}}))(le)),pe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(ue,null))},me=n(31),Ee=function(e){var t=e.pages,n=t.currentPage,a=t.countPages,c=e.eventListener,o=Object(me.a)(new Array(Math.ceil(a/10))),l=P()({"page-item":!0,disabled:1===n}),i=P()({"page-item":!0,disabled:n===o.length});return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:l},r.a.createElement("button",{onClick:c(n-1),className:"page-link"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f")),o.map((function(e,t){var a=t+1,o=P()({"page-item":!0,active:a===n});return r.a.createElement("li",{key:"page".concat(a),className:o},r.a.createElement("button",{onClick:c(a),className:"page-link"},a))})),r.a.createElement("li",{className:i},r.a.createElement("button",{onClick:c(n+1),className:"page-link"},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f"))))},de=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).changePage=function(t){return function(){e.props.fetchList(t),e.props.history.push("/".concat(e.props.type,"/all")+(t?"/".concat(t):""))}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.page;this.props.fetchList(e)}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname,n=this.props.location.pathname,a=/\/all$/.test(this.props.location.pathname);t!==n&&a&&this.changePage()()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.state,c=n.type,o=a.list,l=a.pages,i=a.loading,s=a.error;return e=s?function(){return r.a.createElement(E,{error:s})}:i?function(){return r.a.createElement(k,null)}:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-row flex-wrap justify-content-around"},o.map((function(e){return r.a.createElement(he,{key:"item".concat(e.id),item:e,type:c})}))),r.a.createElement("div",{className:"d-flex flex-row flex-wrap justify-content-around"},r.a.createElement(Ee,{pages:l,eventListener:t.changePage})))},r.a.createElement(e,null)}}]),n}(r.a.Component),he=function(e){var t=e.item,n=e.type;return r.a.createElement("div",{className:"card mb-3",style:{width:"200px"}},r.a.createElement("img",{src:t.img,className:"card-img-top",alt:t.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement(i.b,{to:"/".concat(n,"/").concat(t.id),className:"btn btn-link"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")))},ge=Object(T.f)(M(Object(l.b)((function(e){return{state:e.personListState}}),(function(e,t){return{fetchList:Z(e,t)}}))((function(e){return r.a.createElement(de,Object.assign({},e,{type:N.person}))})))),fe=function(e){return e.relations.map((function(e,t){var n=e.name,a=e.data,c=e.type;return e.loading?r.a.createElement("div",{key:"relation".concat(n).concat(t,"IsLoading"),className:"mb-3"},r.a.createElement("h6",{className:"card-title"},n),r.a.createElement(k,null)):r.a.createElement("div",{key:"relationBlock".concat(c).concat(t),className:"mb-3"},r.a.createElement("h6",{className:"card-title"},n),r.a.createElement("div",{className:"d-flex flex-row flex-wrap justify-content-around"},a.map((function(e,t){return r.a.createElement("div",{key:"relation".concat(c).concat(t),className:"card mb-3",style:{width:"100px"}},r.a.createElement("img",{src:e.img,className:"card-img-top",alt:e.name}),r.a.createElement("div",{className:"card-body px-2 py-1"},r.a.createElement("p",{className:"card-text mb-1"},e.name),r.a.createElement(i.b,{to:"/".concat(c,"/").concat(e.id),className:"btn btn-link px-0 py-0"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")))}))))}))},Ae=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.fetchItem(e)}},{key:"render",value:function(){var e,t=this.props.state,n=t.item,a=t.loading,c=t.error;return e=c?function(){return r.a.createElement(E,{error:c})}:a?function(){return r.a.createElement(k,null)}:function(){return r.a.createElement(Oe,{item:n})},r.a.createElement(e,null)}}]),n}(r.a.Component),Oe=function(e){var t,n=e.item,a=n.id,c=n.name,o=n.img,l=n.data,i=n.relations,s=Object.keys(l);return t=i?function(){return r.a.createElement(fe,{relations:i})}:function(){return null},r.a.createElement("div",{className:"card mb-3"},r.a.createElement("img",{src:o,className:"card-img-top",alt:c}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},c),s.map((function(e,t){return r.a.createElement("p",{key:"item".concat(a,"Data").concat(t),className:"card-text"},ae(l[e]))})),r.a.createElement(t,null)))},Se=Object(T.f)(M(Object(l.b)((function(e){return{state:e.personState}}),(function(e,t){return{fetchItem:J(e,t)}}))((function(e){return r.a.createElement(Ae,e)})))),He=Object(T.f)(M(Object(l.b)((function(e){return{state:e.planetListState}}),(function(e,t){return{fetchList:$(e,t)}}))((function(e){return r.a.createElement(de,Object.assign({},e,{type:N.planet}))})))),je=Object(T.f)((function(e){var t=e.history;return r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430 404: \u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b!"),r.a.createElement("div",null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430",r.a.createElement("button",{className:"btn btn-link",onClick:function(){return t.goBack()}},"\u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")))})),Ie=Object(T.f)(M(Object(l.b)((function(e){return{state:e.planetState}}),(function(e,t){return{fetchItem:ee(e,t)}}))((function(e){return r.a.createElement(Ae,e)})))),ye=Object(T.f)(M(Object(l.b)((function(e){return{state:e.starshipListState}}),(function(e,t){return{fetchList:te(e,t)}}))((function(e){return r.a.createElement(de,Object.assign({},e,{type:N.starship}))})))),ve=Object(T.f)(M(Object(l.b)((function(e){return{state:e.starshipState}}),(function(e,t){return{fetchItem:ne(e,t)}}))((function(e){return r.a.createElement(Ae,e)})))),_e=function(){return r.a.createElement("div",{className:"container mt-5"},r.a.createElement(d,null,r.a.createElement(C,null)),r.a.createElement(d,null,r.a.createElement(T.c,null,r.a.createElement(T.a,{path:"/",exact:!0,component:pe}),r.a.createElement(T.a,{path:"/person/all/:page?",component:ge}),r.a.createElement(T.a,{path:"/person/:id",component:Se}),r.a.createElement(T.a,{path:"/planet/all/:page?",component:He}),r.a.createElement(T.a,{path:"/planet/:id",component:Ie}),r.a.createElement(T.a,{path:"/starship/all/:page?",component:ye}),r.a.createElement(T.a,{path:"/starship/:id",component:ve}),r.a.createElement(T.a,{component:je}))))},be=n(18),Te=n.n(be),we=n(26);function Pe(e){return e.match(/\/([0-9]{1,3})\/$/)[1]}function Ne(e){return"unknown"===e?"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e":e}function Re(e,t){var n={id:Pe(e.url),name:e.name,img:U.a,data:{population:["\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435",e.population],rotation:["\u041f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f",e.rotation_period,"\u0432 \u0441\u0443\u0442\u043a\u0430\u0445"],diameter:["\u0414\u0438\u0430\u043c\u0435\u0442\u0440",e.diameter,"\u0432 \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u0430\u0445"]}};return t||e.residents.length>0&&(n.relations=[{name:"\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b",loading:!0,type:N.person,data:e.residents.map((function(e){return Pe(e)}))}]),n}function Ce(e,t){var n,a=Pe(e.url),r=Ne(e.birth_year),c=Ne(e.mass);switch(e.gender){case"female":n="\u0436\u0435\u043d\u0441\u043a\u0438\u0439";break;case"male":n="\u043c\u0443\u0436\u0441\u043a\u043e\u0439";break;default:n="\u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e"}var o={id:a,name:e.name,img:U.a,data:{height:["\u0420\u043e\u0441\u0442",e.height,"\u0432 \u0441\u0430\u043d\u0442\u0438\u043c\u0435\u0442\u0440\u0430\u0445"],gender:["\u041f\u043e\u043b",n],birth:["\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",r],mass:["\u0412\u0435\u0441",c,"\u0432 \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445"]},relations:[]};return t||(e.starships.length>0&&o.relations.push({name:"\u041f\u0438\u043b\u043e\u0442",loading:!0,type:N.starship,data:e.starships.map((function(e){return Pe(e)}))}),e.homeworld.length>0&&o.relations.push({name:"\u0420\u043e\u0434\u043d\u0430\u044f \u043f\u043b\u0430\u043d\u0435\u0442\u0430",loading:!0,type:N.planet,data:[Pe(e.homeworld)]})),o}function Le(e,t){var n=Pe(e.url),a=Ne(e.cost_in_credits),r={id:n,name:e.name,img:U.a,data:{cost:["C\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",a,"\u0432 \u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0445"],manufacturer:["\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c",e.manufacturer],crew:["\u042d\u043a\u0438\u043f\u0430\u0436",e.crew],length:["\u0414\u043b\u0438\u043d\u043d\u0430",e.length,"\u0432 \u043c\u0435\u0442\u0440\u0430\u0445"],passengers:["\u0412\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0430\u0441\u0441\u0430\u0436\u0438\u0440\u043e\u0432",e.passengers]}};return t||e.pilots.length>0&&(r.relations=[{name:"\u041f\u0438\u043b\u043e\u0442\u044b",loading:!0,type:N.person,data:e.pilots.map((function(e){return Pe(e)}))}]),r}function De(e,t){return{pages:{currentPage:+t||1,countPages:e.count},results:e.results}}var Fe=new(function(){function e(t,n){var a=this;Object(s.a)(this,e),this.getPerson=function(e,t){return a._getResource("".concat(a._dataApiUrl,"/people/").concat(e)).then((function(e){return Ce(e,t)}))},this.getAllPersons=function(e){return a._getResource("".concat(a._dataApiUrl,"/people/")+(e?"?page=".concat(e):"")).then((function(t){return t.results=t.results.map((function(e){return Ce(e)})),t=De(t,e)}))},this.getPersonPhoto=function(e){return a._getImage("".concat(a._imgApiUrl,"/characters/").concat(e,".jpg"))},this.getPlanet=function(e,t){return a._getResource("".concat(a._dataApiUrl,"/planets/").concat(e)).then((function(e){return Re(e,t)}))},this.getAllPlanets=function(e){return a._getResource("".concat(a._dataApiUrl,"/planets/")+(e?"?page=".concat(e):"")).then((function(t){return t.results=t.results.map((function(e){return Re(e)})),t=De(t,e)}))},this.getPlanetPhoto=function(e){return a._getImage("".concat(a._imgApiUrl,"/planets/").concat(e,".jpg"))},this.getStarship=function(e,t){return a._getResource("".concat(a._dataApiUrl,"/starships/").concat(e)).then((function(e){return Le(e,t)}))},this.getAllStarship=function(e){return a._getResource("".concat(a._dataApiUrl,"/starships/")+(e?"?page=".concat(e):"")).then((function(t){return t.results=t.results.map((function(e){return Le(e)})),t=De(t,e)}))},this.getStarshipPhoto=function(e){return a._getImage("".concat(a._imgApiUrl,"/starships/").concat(e,".jpg"))},this._dataApiUrl=t,this._imgApiUrl=n,this.planet={getImageMethod:this.getPlanetPhoto,getItemMethod:this.getPlanet,getListMethod:this.getAllPlanets},this.person={getImageMethod:this.getPersonPhoto,getItemMethod:this.getPerson,getListMethod:this.getAllPersons},this.starship={getImageMethod:this.getStarshipPhoto,getItemMethod:this.getStarship,getListMethod:this.getAllStarship}}return Object(u.a)(e,[{key:"_getResource",value:function(){var e=Object(we.a)(Te.a.mark((function e(t){var n;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.status);case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getImage",value:function(){var e=Object(we.a)(Te.a.mark((function e(t){var n;return Te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.status);case 5:return e.next=7,n.blob();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPersonsMini",value:function(){return this._getResource("".concat(this._dataApiUrl,"/people/")).then((function(e){return e.results.map((function(e){return Ce(e)}))}))}}]),e}())("https://swapi.dev/api","https://starwars-visualguide.com/assets/img");o.a.render(r.a.createElement(l.a,{store:b},r.a.createElement(d,null,r.a.createElement(D,{value:Fe},r.a.createElement(i.a,{basename:"/star-db"},r.a.createElement(_e,null))))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ff25b758.chunk.js.map